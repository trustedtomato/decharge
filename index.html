<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><meta content="Documentation and project website of decharge, the completely disappearing TSX framework."name=description><link href=favicon.svg rel="shortcut icon"><link href=/global.css rel=stylesheet><title>decharge</title><header><h1><svg viewBox="0 0 421 85"height=85 role=img width=421><title>Banner of decharge</title><path d="M40.088 60.0234H43.6915C44.6876 60.0234 45.3907 60.2578 45.8008 60.7266C46.2403 61.166 46.46 61.9277 46.46 63.0117C46.46 64.0957 46.2403 64.8721 45.8008 65.3408C45.3907 65.7803 44.6876 66 43.6915 66H36.7042C35.7081 66 34.9903 65.7803 34.5508 65.3408C34.1407 64.8721 33.9356 64.0957 33.9356 63.0117V59.4961C32.0899 61.8984 29.9512 63.7441 27.5196 65.0332C25.088 66.3223 22.4366 66.9668 19.5655 66.9668C15.9327 66.9668 12.6807 66.1172 9.80963 64.418C6.93854 62.6894 4.68268 60.2285 3.04206 57.0351C1.80328 54.6018 1.03218 51.868 0.72876 48.8H7.72366C7.94918 50.4683 8.36618 51.9863 8.97467 53.3877C9.97077 55.6142 11.4063 57.3574 13.2813 58.6172C15.1563 59.8476 17.3975 60.4629 20.0049 60.4629C22.6124 60.4629 24.9268 59.8769 26.9483 58.7051C28.9991 57.5332 30.5958 55.834 31.7383 53.6074C32.4924 52.1747 33.0038 50.5723 33.2727 48.8H40.088V60.0234Z"fill=black></path><path d="M389.981 57.2549C392.383 59.4814 395.767 60.5947 400.132 60.5947C402.827 60.5947 405.493 60.2578 408.13 59.584C410.767 58.8808 413.081 57.958 415.073 56.8154C415.571 56.5517 416.025 56.4199 416.436 56.4199C417.461 56.4199 418.296 57.1963 418.94 58.749C419.204 59.3642 419.336 59.9209 419.336 60.4189C419.336 61.5908 418.691 62.499 417.402 63.1435C415.147 64.2861 412.481 65.209 409.404 65.9121C406.328 66.6152 403.237 66.9668 400.132 66.9668C395.708 66.9668 391.929 66.1172 388.794 64.418C385.659 62.7187 383.272 60.2724 381.631 57.0791C380.39 54.6631 379.618 51.9034 379.316 48.8H386.228C386.632 52.4424 387.883 55.2607 389.981 57.2549Z"fill=black></path><path d="M363.877 67.3183C363.877 70.8047 363.13 73.793 361.636 76.2832C360.171 78.8027 358.032 80.7217 355.22 82.04C352.407 83.3584 349.023 84.0176 345.068 84.0176C342.256 84.0176 339.414 83.7685 336.543 83.2705C333.672 82.8017 330.991 82.1133 328.501 81.2051C327.358 80.7949 326.787 80.0185 326.787 78.876C326.787 78.4072 326.904 77.8213 327.139 77.1182C327.666 75.5068 328.501 74.7012 329.644 74.7012C329.966 74.7012 330.288 74.7598 330.61 74.8769C332.896 75.6973 335.298 76.3418 337.817 76.8105C340.337 77.2793 342.754 77.5137 345.068 77.5137C349.111 77.5137 352.158 76.5469 354.209 74.6133C356.26 72.709 357.285 70.0869 357.285 66.7471V57.9141C353.652 62.4844 349.009 64.7695 343.355 64.7695C339.722 64.7695 336.47 63.9639 333.599 62.3525C330.728 60.7119 328.472 58.3682 326.831 55.3213C325.778 53.3649 325.062 51.1912 324.685 48.8H331.768C332.006 49.8294 332.338 50.802 332.764 51.7178C333.76 53.7685 335.195 55.3799 337.07 56.5517C338.945 57.6943 341.187 58.2656 343.794 58.2656C346.401 58.2656 348.716 57.7236 350.737 56.6396C352.788 55.5557 354.385 53.9883 355.527 51.9375C356.072 50.9708 356.49 49.9249 356.782 48.8H363.877V67.3183Z"fill=black></path><path d="M254.541 56.5517C254.541 58.8662 255.508 60.0234 257.441 60.0234H258.98C259.976 60.0234 260.679 60.2578 261.089 60.7266C261.528 61.166 261.748 61.9277 261.748 63.0117C261.748 64.0957 261.528 64.8721 261.089 65.3408C260.679 65.7803 259.976 66 258.98 66H256.167C254.263 66 252.622 65.5312 251.245 64.5937C249.898 63.6269 249.019 62.2207 248.608 60.375C246.206 62.4844 243.599 64.1103 240.786 65.2529C238.003 66.3955 235.044 66.9668 231.909 66.9668C228.95 66.9668 226.328 66.4687 224.043 65.4726C221.787 64.4473 220.015 62.9678 218.726 61.0342C217.437 59.1006 216.792 56.8008 216.792 54.1348C216.792 52.128 217.103 50.3497 217.725 48.8H226.186C224.552 49.9525 223.735 51.6868 223.735 54.0029C223.735 56.1416 224.468 57.8115 225.933 59.0127C227.427 60.1846 229.507 60.7705 232.173 60.7705C238.003 60.7705 243.262 58.3535 247.949 53.5195V48.8H254.541V56.5517Z"fill=black></path><path d="M173.682 60.0234H177.725C178.721 60.0234 179.424 60.2578 179.834 60.7266C180.273 61.166 180.493 61.9277 180.493 63.0117C180.493 64.0957 180.273 64.8721 179.834 65.3408C179.424 65.7803 178.721 66 177.725 66H163.486C162.49 66 161.773 65.7803 161.333 65.3408C160.923 64.8721 160.718 64.0957 160.718 63.0117C160.718 61.9277 160.923 61.166 161.333 60.7266C161.773 60.2578 162.49 60.0234 163.486 60.0234H167.09V48.8H173.682V60.0234Z"fill=black></path><path d="M201.455 60.0234H205.059C206.055 60.0234 206.758 60.2578 207.168 60.7266C207.607 61.166 207.827 61.9277 207.827 63.0117C207.827 64.0957 207.607 64.8721 207.168 65.3408C206.758 65.7803 206.055 66 205.059 66H190.82C189.824 66 189.107 65.7803 188.667 65.3408C188.257 64.8721 188.052 64.0957 188.052 63.0117C188.052 61.9277 188.257 61.166 188.667 60.7266C189.107 60.2578 189.824 60.0234 190.82 60.0234H194.863V48.8H201.455V60.0234Z"fill=black></path><path d="M117.212 53.3437C118.413 55.5703 120.083 57.3135 122.222 58.5732C124.39 59.833 126.88 60.4629 129.692 60.4629C132.388 60.4629 134.995 60.0527 137.515 59.2324C140.064 58.3828 142.378 57.167 144.458 55.5849C145.073 55.1162 145.645 54.8818 146.172 54.8818C147.022 54.8818 147.813 55.4824 148.545 56.6836C148.984 57.416 149.204 58.1191 149.204 58.793C149.204 59.8183 148.735 60.668 147.798 61.3418C145.454 63.0996 142.686 64.4766 139.492 65.4726C136.299 66.4687 133.032 66.9668 129.692 66.9668C125.503 66.9668 121.797 66.0439 118.574 64.1982C115.381 62.3525 112.905 59.8183 111.148 56.5957C109.852 54.22 109.034 51.6214 108.693 48.8H115.706C115.982 50.4277 116.484 51.9422 117.212 53.3437Z"fill=black></path><path d="M66.1915 57.2549C68.5938 59.4814 71.9776 60.5947 76.3428 60.5947C79.0381 60.5947 81.7042 60.2578 84.3409 59.584C86.9776 58.8808 89.2921 57.958 91.2842 56.8154C91.7823 56.5517 92.2364 56.4199 92.6465 56.4199C93.6719 56.4199 94.5069 57.1963 95.1514 58.749C95.4151 59.3642 95.5469 59.9209 95.5469 60.4189C95.5469 61.5908 94.9024 62.499 93.6133 63.1435C91.3575 64.2861 88.6915 65.209 85.6153 65.9121C82.5391 66.6152 79.4483 66.9668 76.3428 66.9668C71.919 66.9668 68.1397 66.1172 65.0049 64.418C61.8702 62.7187 59.4825 60.2724 57.8419 57.0791C56.6006 54.6631 55.8289 51.9034 55.5268 48.8H62.4394C62.8431 52.4424 64.0937 55.2607 66.1915 57.2549Z"fill=black></path><path d="M287.544 60.0234H302.354C303.35 60.0234 304.053 60.2578 304.463 60.7266C304.902 61.166 305.122 61.9277 305.122 63.0117C305.122 64.0957 304.902 64.8721 304.463 65.3408C304.053 65.7803 303.35 66 302.354 66H274.053C273.057 66 272.339 65.7803 271.899 65.3408C271.489 64.8721 271.284 64.0957 271.284 63.0117C271.284 61.9277 271.489 61.166 271.899 60.7266C272.339 60.2578 273.057 60.0234 274.053 60.0234H280.952V48.8H287.544V60.0234Z"fill=black></path><path d="M76.3428 16.4277C80.5908 16.4277 84.209 17.292 87.1973 19.0205C90.2148 20.7197 92.5293 23.0928 94.1406 26.1396C95.752 29.1572 96.6748 32.6436 96.9092 36.5986C96.9092 37.5947 96.6895 38.2979 96.25 38.708C95.8398 39.1182 95.1367 39.3232 94.1406 39.3232H62.3242H55.4196C55.3938 38.7907 55.3809 38.2487 55.3809 37.6973C55.3809 33.5078 56.2744 29.8018 58.0615 26.5791C59.8486 23.3564 62.3242 20.8662 65.4883 19.1084C68.6523 17.3213 72.2705 16.4277 76.3428 16.4277ZM67.3779 25.5684C69.751 23.7227 72.7393 22.7998 76.3428 22.7998C80.1514 22.7998 83.1543 23.6934 85.3516 25.4805C87.5781 27.2383 88.999 29.8018 89.6143 33.1709H62.7637C63.4961 29.9189 65.0342 27.3848 67.3779 25.5684Z"fill=black clip-rule=evenodd fill-rule=evenodd></path><path d="M145.732 16.4277C146.934 16.4277 147.783 16.6475 148.281 17.0869C148.779 17.5264 149.028 18.2588 149.028 19.2842V32.0283C149.028 33.0537 148.779 33.7861 148.281 34.2256C147.783 34.665 146.934 34.8848 145.732 34.8848C144.531 34.8848 143.682 34.665 143.184 34.2256C142.686 33.7861 142.437 33.0537 142.437 32.0283C142.437 30.2412 141.968 28.6592 141.03 27.2822C140.093 25.9053 138.687 24.8359 136.812 24.0742C134.966 23.3125 132.739 22.9316 130.132 22.9316C127.319 22.9316 124.8 23.5615 122.573 24.8213C120.347 26.0811 118.604 27.8389 117.344 30.0947C116.084 32.3506 115.454 34.8848 115.454 37.6973C115.454 38.2504 115.476 38.7923 115.521 39.3232H108.559C108.527 38.7888 108.511 38.2468 108.511 37.6973C108.511 33.6543 109.404 30.0215 111.191 26.7988C112.979 23.5762 115.469 21.042 118.662 19.1963C121.885 17.3506 125.562 16.4277 129.692 16.4277C132.3 16.4277 134.688 16.9111 136.855 17.8779C139.053 18.8154 140.913 20.1631 142.437 21.9209V19.2842C142.437 18.2588 142.686 17.5264 143.184 17.0869C143.682 16.6475 144.531 16.4277 145.732 16.4277Z"fill=black></path><path d="M170.913 0.34375C171.909 0.34375 172.612 0.578125 173.022 1.04688C173.462 1.48633 173.682 2.24805 173.682 3.33203V25.2168C175.586 22.375 177.783 20.207 180.273 18.7129C182.793 17.1895 185.503 16.4277 188.403 16.4277C191.069 16.4277 193.384 17.0137 195.347 18.1855C197.31 19.3281 198.818 20.9834 199.873 23.1514C200.928 25.3193 201.455 27.8535 201.455 30.7539V39.2793L194.863 39.3232V31.4131C194.863 28.8057 194.263 26.7402 193.062 25.2168C191.86 23.6934 190.088 22.9316 187.744 22.9316C185.254 22.9316 182.925 23.6494 180.757 25.085C178.618 26.5205 176.904 28.498 175.615 31.0176C174.344 33.5014 173.7 36.27 173.682 39.3232H167.09V6.32031H163.047C162.051 6.32031 161.333 6.10059 160.894 5.66113C160.483 5.19238 160.278 4.41602 160.278 3.33203C160.278 2.24805 160.483 1.48633 160.894 1.04688C161.333 0.578125 162.051 0.34375 163.047 0.34375H170.913Z"fill=black></path><path d="M238.018 16.4277C243.525 16.4277 247.656 17.6582 250.41 20.1191C253.164 22.5801 254.541 26.2275 254.541 31.0615V39.2793H218.479C219.284 37.9399 220.377 36.8119 221.758 35.8955C225.068 33.6689 229.346 32.5557 234.59 32.5557C239.248 32.5557 243.701 33.3027 247.949 34.7969V31.0615C247.949 28.2197 247.144 26.1396 245.532 24.8213C243.95 23.4736 241.387 22.7998 237.842 22.7998C235.645 22.7998 233.359 23.1074 230.986 23.7227C228.613 24.3379 226.357 25.1875 224.219 26.2715C223.721 26.5352 223.267 26.667 222.856 26.667C221.89 26.667 221.084 25.9639 220.439 24.5576C220.117 23.8545 219.956 23.2686 219.956 22.7998C219.956 21.7744 220.498 20.9834 221.582 20.4268C224.043 19.1377 226.68 18.1562 229.492 17.4824C232.334 16.7793 235.176 16.4277 238.018 16.4277Z"fill=black></path><path d="M305.254 16.4277C307.539 16.4277 309.678 17.0137 311.67 18.1855C312.842 18.8887 313.428 19.7969 313.428 20.9102C313.428 21.4375 313.296 22.0527 313.032 22.7559C312.417 24.4258 311.567 25.2607 310.483 25.2607C310.044 25.2607 309.634 25.1436 309.253 24.9092C307.817 24.1182 306.279 23.7227 304.639 23.7227C302.002 23.7227 299.351 24.6455 296.685 26.4912C294.019 28.3076 291.821 30.7393 290.093 33.7861C289.107 35.5531 288.408 37.3842 287.994 39.2793H280.952V23.3711H275.371C274.375 23.3711 273.657 23.1514 273.218 22.7119C272.808 22.2432 272.603 21.4668 272.603 20.3828C272.603 19.2988 272.808 18.5371 273.218 18.0977C273.657 17.6289 274.375 17.3945 275.371 17.3945H284.336C285.332 17.3945 286.035 17.6289 286.445 18.0977C286.885 18.5371 287.104 19.2988 287.104 20.3828V29.2598C288.511 26.6816 290.21 24.4258 292.202 22.4922C294.194 20.5586 296.318 19.0645 298.574 18.0098C300.83 16.9551 303.057 16.4277 305.254 16.4277Z"fill=black></path><path d="M400.132 16.4277C404.38 16.4277 407.998 17.292 410.986 19.0205C414.004 20.7197 416.318 23.0928 417.93 26.1396C419.541 29.1572 420.464 32.6436 420.698 36.5986C420.698 37.5947 420.479 38.2979 420.039 38.708C419.629 39.1182 418.926 39.3232 417.93 39.3232H379.209C379.183 38.7907 379.17 38.2487 379.17 37.6973C379.17 33.5078 380.063 29.8018 381.851 26.5791C383.638 23.3564 386.113 20.8662 389.277 19.1084C392.441 17.3213 396.06 16.4277 400.132 16.4277ZM391.167 25.5684C393.54 23.7227 396.528 22.7998 400.132 22.7998C403.94 22.7998 406.943 23.6934 409.141 25.4805C411.367 27.2383 412.788 29.8018 413.403 33.1709H386.553C387.285 29.9189 388.823 27.3848 391.167 25.5684Z"fill=black clip-rule=evenodd fill-rule=evenodd></path><path d="M343.354 16.4277C346.226 16.4277 348.877 17.0723 351.309 18.3613C353.74 19.6504 355.879 21.4961 357.725 23.8984V20.3828C357.725 19.2988 357.93 18.5371 358.34 18.0977C358.779 17.6289 359.497 17.3945 360.493 17.3945H367.48C368.477 17.3945 369.18 17.6289 369.59 18.0977C370.029 18.5371 370.249 19.2988 370.249 20.3828C370.249 21.4668 370.029 22.2432 369.59 22.7119C369.18 23.1514 368.477 23.3711 367.48 23.3711H363.877V39.3232H357.085C357.218 38.4568 357.285 37.5486 357.285 36.5986C357.285 33.7861 356.699 31.3545 355.527 29.3037C354.385 27.2236 352.788 25.6416 350.737 24.5576C348.716 23.4736 346.401 22.9316 343.794 22.9316C341.187 22.9316 338.945 23.5176 337.07 24.6895C335.195 25.832 333.76 27.4434 332.764 29.5234C331.797 31.5742 331.313 33.9326 331.313 36.5986C331.313 37.5436 331.374 38.4519 331.496 39.3232H324.498C324.413 38.4425 324.37 37.5343 324.37 36.5986C324.37 32.4971 325.19 28.9229 326.831 25.876C328.472 22.8291 330.728 20.5 333.599 18.8887C336.47 17.248 339.722 16.4277 343.354 16.4277Z"fill=black></path><path d="M37.3193 0.34375C38.3154 0.34375 39.0186 0.578125 39.4287 1.04688C39.8682 1.48633 40.0879 2.24805 40.0879 3.33203V39.3232H33.4376C33.4766 38.7949 33.4961 38.2529 33.4961 37.6973C33.4961 34.6504 32.9102 32.0137 31.7383 29.7871C30.5957 27.5605 28.999 25.8613 26.9482 24.6895C24.9268 23.5176 22.6123 22.9316 20.0049 22.9316C17.3975 22.9316 15.1562 23.5615 13.2812 24.8213C11.4062 26.0518 9.9707 27.7803 8.97461 30.0068C8.00781 32.2334 7.52441 34.7969 7.52441 37.6973C7.52441 38.2516 7.54207 38.7936 7.57738 39.3232H0.620793C0.594301 38.7902 0.581055 38.2482 0.581055 37.6973C0.581055 33.3613 1.40137 29.5967 3.04199 26.4033C4.68262 23.1807 6.93848 20.7197 9.80957 19.0205C12.6807 17.292 15.9326 16.4277 19.5654 16.4277C25.0732 16.4277 29.7168 18.8447 33.4961 23.6787V6.32031H26.377C25.3809 6.32031 24.6631 6.10059 24.2236 5.66113C23.8135 5.19238 23.6084 4.41602 23.6084 3.33203C23.6084 2.24805 23.8135 1.48633 24.2236 1.04688C24.6631 0.578125 25.3809 0.34375 26.377 0.34375H37.3193Z"fill=black></path></svg></h1><p>A TSX based framework which disappears <em>completely.</em></header><section class="full-text introduction"><div class=body-text><p>Blogs, documentation and similar software often don’t need a lot of client-side JavaScript and are only consisting of static files. This framework aims to make the best out of this scenario. It features a <em>routing system similar to Next.js’</em> and uses <em><a href=https://www.typescriptlang.org/docs/handbook/jsx.html>TSX</a> as its templating system</em> so the framework can leverage <em>the amazing IDE support of React</em><label class=sidenote__sup for=int-sn1>1</label><span class=sidenote id=int-sn1><label class=sidenote__sup>1</label> decharge uses Preact under the hood though, but that shouldn’t really matter.</span>.<p>It has a component system and a rendering engine which was designed to <em>output as little code as possible</em> on build<label class=sidenote__sup for=int-sn2>2</label><span class=sidenote id=int-sn2><label class=sidenote__sup>2</label> except for trivial minifaction, which should be done using html-minifier or similar after building the project.</span>. As an example, the size of this page’s HTML-CSS-JS code is 2.32 kB combined (1.5 kB if gzipped).<p>If you found these two paragraphs interesting, consider checking out the <a href=#getting-started>Getting started</a> guide below or the <a href=https://github.com/trustedtomato/decharge>GitHub page</a> of the project.</div></section><svg viewBox="-1 0 10 57"class=arrow><line stroke=#000 stroke-width=1.3333333333333333 x1=4 x2=4 y1=0 y2=56></line><polyline fill=none points="0,52 4,56 8,52"stroke=black stroke-linecap=round stroke-linejoin=round stroke-width=1.3333333333333333></polyline></svg><section class=docs><div class=docs__table-of-contents><h2>Table of contents</h2><ul><li><a href=#docs-usage>Usage</a><ul><li><a href=#docs-routing>Routing</a><ul><li><a href=#docs-dynamic-routing-routes-outputting-multiple-pages>Dynamic routing = routes outputting multiple pages</a></ul><li><a href=#docs-components>Components</a><ul><li><a href=#docs-async-components>Async components</a></ul></ul></ul></div><div class="full-text docs__content"><div class=body-text><h2 id=docs-usage tabindex=-1><a href=#docs-usage class=header-anchor>Usage</a></h2><p>By default, your static files live in <code>public/</code> and everything else in <code>src/</code>. Your routes should be in <code>src/routes/</code><label class=sidenote__sup for=docs-sn1>1</label><span class=sidenote id=docs-sn1><label class=sidenote__sup>1</label> These can be configured, see <a href=#docs-configuration>Configuration</a>.</span>.<h3 id=docs-routing tabindex=-1><a href=#docs-routing class=header-anchor>Routing</a></h3><p>Every route should be a <code>.tsx</code> file, containing something like this:<pre><code class="block language-tsx"><span class="token comment">// src/routes/index.tsx</span>

<span class="token keyword">import</span> Head <span class="token keyword">from</span> <span class="token string">'../components/Head.tsx'</span>

<span class="token comment">// The route should be "export default"-ed.</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Head</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Welcome<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token plain-text">
    Hello World!
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span class="token plain-text">
</span></code></pre><p>You can use any “export default”-ed Preact component as route (because the route will be rendered using Preact), but using tsx is the easiest way to define one.<h4 id=docs-dynamic-routing-routes-outputting-multiple-pages tabindex=-1><a href=#docs-dynamic-routing-routes-outputting-multiple-pages class=header-anchor>Dynamic routing = routes outputting multiple pages</a></h4><p>You can have route paths like <code>about/[author].tsx</code> or even <code>about/[author]/posts/[postSlug]/appendix-[appendixNumber].tsx</code> (this should be familiar to Next.js users). So, when there are [square bracketed] parts in the route’s path (relative to the routes directory), you can replace those using an additional export called <code>paramsList</code>.<pre><code class="block language-tsx"><span class="token comment">// src/routes/about/[authorSlug]/posts/[postSlug]/footnotes-[footnoteNumber].tsx</span>

<span class="token keyword">export</span> paramsList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token comment">// This "params" generates:</span>
  <span class="token comment">// dist/about/alexander-pushkin/posts/eugene-onegin/footnotes-21/index.html</span>
  authorSlug<span class="token operator">:</span> <span class="token string">'alexander-pushkin'</span><span class="token punctuation">,</span>
  postSlug<span class="token operator">:</span> <span class="token string">'eugene-onegin'</span><span class="token punctuation">,</span>
  footnoteNumber<span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
  <span class="token comment">// Note that this could be any other, arbitary attribute.</span>
  <span class="token comment">// The point is that the whole params object gets passed</span>
  <span class="token comment">// to the "export default"-ed function.</span>
  content<span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">Pushkin wrote at least 18 stanzas of a never-completed tenth chapter. \
It contained many satires and even direct criticism on contemporary Russian rulers, \
including the Emperor himself. Afraid of being prosecuted for dissidence, \
Pushkin burnt most of the tenth chapter. Very little of it survived in Pushkin's notebooks.</span><span class="token string template-punctuation">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// This "params" generates: dist/about/queen/posts/bohemian/rhapsody/footnotes-13/index.html</span>
  authorSlug<span class="token operator">:</span> <span class="token string">'queen'</span><span class="token punctuation">,</span>
  <span class="token comment">// Note that you can even put slashes here.</span>
  <span class="token comment">// Plus, in the final path multiple adjacent slashes will be</span>
  <span class="token comment">// merged into one, so having 'bohemian//rhapsody' would have the same effect.</span>
  postSlug<span class="token operator">:</span> <span class="token string">'bohemian/rhapsody'</span><span class="token punctuation">,</span>
  footnoteNumber<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">He played the beginning on the piano, then stopped and said, \
  'And this is where the opera section comes in!' Then we went out to eat dinner.</span><span class="token string template-punctuation">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> authorSlug<span class="token punctuation">,</span> postSlug<span class="token punctuation">,</span> footnoteNumber<span class="token punctuation">,</span> content <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  Here, footnote number </span><span class="token punctuation">{</span>footnoteNumber<span class="token punctuation">}</span><span class="token plain-text"> refers to: </span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
</code></pre><h3 id=docs-components tabindex=-1><a href=#docs-components class=header-anchor>Components</a></h3><p>A component can be any Preact component as you might have guessed. The thing is that you can’t really use <code>styled-jsx</code> or a similar library, because they are bloaty or don’t work in a purely SSR enviroment (if you find anything that works, please <a href=https://github.com/trustedtomato/decharge/issues>open an issue</a>), so decharge provides a way to add styles and client-side scripts (preferably just for progressive enhancement) to a component. Firstly, you have to make the component:<pre><code class="block language-tsx"><span class="token comment">// src/components/MyComplexComponent.tsx</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> createComplexComponent<span class="token punctuation">,</span> css <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'decharge'</span>

<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token generic-function"><span class="token function">createComplexComponent</span><span class="token class-name generic"><span class="token operator">&lt;</span>Props<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Required.</span>
  <span class="token comment">// This should be an ID unique to the component.</span>
  <span class="token comment">// If you have only one component in one file, which you probably should,</span>
  <span class="token comment">// using import.meta.url is perfect.</span>
  id<span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
  <span class="token comment">// Required.</span>
  <span class="token comment">// The "Props" gets extended here with a generatedClassName property,</span>
  <span class="token comment">// which can be used to target the component for styling + scripting.</span>
  <span class="token comment">// The generated className is unique to the component.</span>
  <span class="token function function-variable">Component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> generatedClassName <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span>generatedClassName<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    I am red and if you click me, I will make an alert.
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
  <span class="token comment">// Optional.</span>
  <span class="token comment">// ".this" will be replaced with the generated className.</span>
  style<span class="token operator">:</span> css<span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">
    .this {
      color: red;
    }
  </span><span class="token string template-punctuation">`</span></span><span class="token punctuation">,</span>
  <span class="token comment">// Optional.</span>
  <span class="token comment">// Using script is very quirky.</span>
  <span class="token comment">// 1. Try to use legacy syntax if possible, the user of the component</span>
  <span class="token comment">// might want to target older browsers and transpiling modern code sometimes</span>
  <span class="token comment">// results in a big chunk of unnecessary code.</span>
  <span class="token comment">// 2. Using the method syntax (script () {}) would result in</span>
  <span class="token comment">// erroneous code, see <a href=https://github.com/trustedtomato/decharge/issues/6 class="token url-link">https://github.com/trustedtomato/decharge/issues/6</a></span>
  <span class="token comment">// 3. This function will be executed in a different context,</span>
  <span class="token comment">// so don't reference any variable which you declared earlier in this file.</span>
  <span class="token function function-variable">script</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">generatedClassName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> els <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">.</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>generatedClassName<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string template-punctuation">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> els<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> el<span class="token punctuation">;</span> el <span class="token operator">=</span> els<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span><span class="token function function-variable">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Bonjour!'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>Secondly, you have to place some special elements into your route:<pre><code class="block language-tsx"><span class="token comment">// src/routes/foo.tsx</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Scripts<span class="token punctuation">,</span> Styles <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'decharge'</span>
<span class="token keyword">import</span> MyComplexComponent <span class="token keyword">from</span> <span class="token string">'../components/MyComplexComponent.js'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Styles</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComplexComponent</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Scripts</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>end-of-body<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre><p>See <a href=https://github.com/vercel/styled-jsx/#syntax-highlighting>https://github.com/vercel/styled-jsx/#syntax-highlighting</a> for CSS syntax highlighting.<h4 id=docs-async-components tabindex=-1><a href=#docs-async-components class=header-anchor>Async components</a></h4><p>You can’t simply use a <code>(params) => Promise&lt;JSX.Element></code> instead of a <code>(params) => JSX.Element</code>, so this route’s code is invalid:<pre><code class="block language-tsx"><span class="token comment">// INVALID ROUTE!</span>

<span class="token keyword">import</span> fetch <span class="token keyword">from</span> <span class="token string">'node-fetch'</span>

<span class="token keyword">const</span> <span class="token function function-variable">AsyncComponent</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
  The length of </span><span class="token punctuation">{</span>url<span class="token punctuation">}</span><span class="token plain-text">'s source code is </span><span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">text</span> <span class="token operator">=></span> text<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AsyncComponent</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><a href=https://google.com class="token url-link">https://google.com</a><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
</code></pre><p>To fix this issue, there is a built-in function in decharge called <code>createAsyncComponent</code>. <label class=sidenote__sup for=docs-sn2>2</label><span class=sidenote id=docs-sn2><label class=sidenote__sup>2</label> Note that you can’t use hooks inside the function. If you do want to use them, you should use the <code>useConstAsync</code> hook.</span><pre><code class="block language-tsx"><span class="token comment">// Valid route.</span>

<span class="token keyword">import</span> fetch <span class="token keyword">from</span> <span class="token string">'node-fetch'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'decharge'</span>

<span class="token keyword">const</span> AsyncComponent <span class="token operator">=</span> <span class="token function">createAsyncComponent</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
    The length of </span><span class="token punctuation">{</span>url<span class="token punctuation">}</span><span class="token plain-text">'s source code is </span><span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">text</span> <span class="token operator">=></span> text<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AsyncComponent</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><a href=https://google.com class="token url-link">https://google.com</a><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
</code></pre></div></div></section>